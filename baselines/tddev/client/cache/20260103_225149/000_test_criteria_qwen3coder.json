[
    {
        "requirement_tested": "A text input field for users to enter mathematical expressions",
        "user_persona": "A college student preparing for a calculus exam.",
        "user_goal": "To input a complex mathematical expression and get it evaluated.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Locating Input Field",
                "description": "Jamie opens the website and sees a clean interface with a labeled input box titled 'Mathematical Expression'. She recognizes it as the place to type her equation.",
                "action": "Visually locate the input field with label 'Mathematical Expression'.",
                "expected_outcome": "An input field with placeholder 'Enter expression...' and a calculator icon on the left is visible, styled with mint cream background and teal border highlight."
            },
            {
                "step": 2,
                "title": "Entering Expression",
                "description": "Jamie clicks the input field and types in a complex expression involving parentheses and exponents, making sure everything looks correct.",
                "action": "Click on the input field and type '(3 + 5) * 2^3'.",
                "expected_outcome": "The input field gains focus, accepts typed characters, and displays the entered expression clearly."
            },
            {
                "step": 3,
                "title": "Submitting via Keyboard Shortcut",
                "description": "Eager to see the result, Jamie presses the Enter key while still focused in the input field, hoping it will trigger the calculation automatically.",
                "action": "Press the 'Enter' key while the input field is focused.",
                "expected_outcome": "The calculation is submitted to the backend API without needing to click a separate button."
            }
        ]
    },
    {
        "requirement_tested": "A dropdown menu or selector for choosing calculation types (e.g., Basic Arithmetic)",
        "user_persona": "A high school math teacher demonstrating different calculation modes to students.",
        "user_goal": "To switch between calculation types to demonstrate various mathematical operations.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Opening Calculation Type Dropdown",
                "description": "Mr. Peterson wants to show his class how scientific calculations work, so he clicks the dropdown menu labeled 'Calculation Type' which currently shows 'Basic Arithmetic'.",
                "action": "Click on the 'Calculation Type' dropdown menu.",
                "expected_outcome": "The dropdown expands, revealing options: 'Basic Arithmetic', 'Scientific', and 'Statistical'."
            },
            {
                "step": 2,
                "title": "Selecting Scientific Mode",
                "description": "He moves his cursor down to the 'Scientific' option and clicks it to change the mode for more advanced functions.",
                "action": "Hover over 'Scientific' then click it.",
                "expected_outcome": "The dropdown closes and the displayed value changes to 'Scientific'. The background of the hovered item turns teal temporarily during hover."
            }
        ]
    },
    {
        "requirement_tested": "A button to execute the entered calculation",
        "user_persona": "A software engineer checking quick computations during coding.",
        "user_goal": "To quickly compute a basic arithmetic expression using the calculate button.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Preparing Expression and Type",
                "description": "Sam enters '10+20' into the expression field and confirms 'Basic Arithmetic' is selected from the dropdown.",
                "action": "Enter '10+20' into the expression input. Confirm dropdown selection is 'Basic Arithmetic'.",
                "expected_outcome": "Expression is visible in the input field; calculation type reflects 'Basic Arithmetic'."
            },
            {
                "step": 2,
                "title": "Clicking Calculate Button",
                "description": "Instead of pressing Enter, Sam prefers to explicitly click the 'Calculate' button next to the input fields.",
                "action": "Click the 'Calculate' button with teal text and play arrow icon.",
                "expected_outcome": "On hover, the button's background changes slightly and gains shadow. On click, the expression and type are sent to the backend API for processing."
            }
        ]
    },
    {
        "requirement_tested": "A display area to show the result of the calculation",
        "user_persona": "An accountant verifying financial formulas.",
        "user_goal": "To view the computed result of a financial formula instantly.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Waiting for Result Display",
                "description": "After submitting the calculation, Patricia watches the empty result container below the inputs, waiting for the computed value to appear.",
                "action": "Observe the result display area beneath the input controls.",
                "expected_outcome": "Initially shows placeholder '--'. Upon receiving data, updates in real-time to show the calculated number centered inside the container with teal borders and mint cream background."
            }
        ]
    },
    {
        "requirement_tested": "Frontend application that fetches calculation logic from a backend API",
        "user_persona": "A remote developer testing new features of the app.",
        "user_goal": "To verify that frontend correctly communicates with backend to perform calculations.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Sending Calculation Request",
                "description": "Dev enters a test expression and clicks 'Calculate', expecting the frontend to make an API call to process it.",
                "action": "Enter 'sqrt(16)' and click 'Calculate'.",
                "expected_outcome": "Frontend sends a POST request to '/api/calculate' containing the expression and selected calculation type."
            },
            {
                "step": 2,
                "title": "Receiving Live Updates",
                "description": "While the backend processes the request, Dev checks if the frontend listens for updates through WebSocket.",
                "action": "Monitor network activity and UI update mechanism.",
                "expected_outcome": "Frontend establishes a WebSocket connection to '/ws/calculations' and receives the result once ready, updating the UI instantly."
            }
        ]
    },
    {
        "requirement_tested": "Backend API with endpoints to receive expressions, process calculations, and return results",
        "user_persona": "A backend developer validating API behavior.",
        "user_goal": "To confirm that backend properly handles calculation requests and returns accurate results.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "API Receives Valid Request",
                "description": "The developer submits a known expression through the frontend and observes backend logs for proper handling.",
                "action": "Submit POST request to '/api/calculate' with {expression: '2*3', type: 'Basic Arithmetic'}.",
                "expected_outcome": "Backend receives the request, validates it, performs computation, and prepares a response with the correct result."
            }
        ]
    },
    {
        "requirement_tested": "Backend service connected to a PostgreSQL database using specified environment variables",
        "user_persona": "A DevOps engineer deploying the application.",
        "user_goal": "To ensure the backend connects securely to the database using predefined credentials.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Verifying Database Connection",
                "description": "During deployment, the engineer verifies that the backend successfully connects to the PostgreSQL instance.",
                "action": "Check backend logs for successful database connection message.",
                "expected_outcome": "Logs indicate that the backend used environment variables (DB_HOST=localhost, DB_PORT=5432, etc.) to establish a secure connection using node-postgres library."
            }
        ]
    },
    {
        "requirement_tested": "Database schema to store calculation history or user data if needed",
        "user_persona": "A database administrator reviewing storage structures.",
        "user_goal": "To confirm that the database schema supports logging calculation activities.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Inspecting Calculations Table",
                "description": "The DBA inspects the database to validate that the calculations table exists with proper columns.",
                "action": "Query database for existence and structure of 'calculations' table.",
                "expected_outcome": "Table 'calculations' exists with schema matching CREATE TABLE IF NOT EXISTS ... including id, user_session_id, expression, calculation_type, result, and timestamp fields."
            }
        ]
    },
    {
        "requirement_tested": "Real-time communication between frontend and backend during calculation execution",
        "user_persona": "A UX researcher studying responsiveness of web apps.",
        "user_goal": "To evaluate how smoothly the UI responds to long-running calculations.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Triggering Long Calculation",
                "description": "Researcher submits a computationally heavy expression designed to take several seconds to complete.",
                "action": "Submit expression 'factorial(1000)' under 'Scientific' mode.",
                "expected_outcome": "Frontend maintains WebSocket connection to '/ws/calculations'; no UI freeze occurs, and result appears dynamically once backend finishes processing."
            }
        ]
    },
    {
        "requirement_tested": "Error handling for invalid mathematical expressions or unsupported operations",
        "user_persona": "A curious teenager experimenting with edge cases.",
        "user_goal": "To try entering invalid syntax and observe system's error response.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Entering Invalid Syntax",
                "description": "Teenager deliberately types an invalid expression like '5++5' into the input field and hits 'Calculate'.",
                "action": "Enter '5++5' and click 'Calculate'.",
                "expected_outcome": "System detects invalid syntax and triggers an error banner above the input section showing message 'Invalid mathematical syntax detected.'"
            }
        ]
    },
    {
        "requirement_tested": "Responsive UI design with mint cream background and teal component highlights",
        "user_persona": "A graphic designer evaluating UI aesthetics.",
        "user_goal": "To assess whether the UI meets specified color scheme and responsiveness standards.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Checking Visual Consistency Across Devices",
                "description": "Designer resizes browser window to simulate mobile and tablet views to check adaptive layout and color usage.",
                "action": "Resize browser viewport to <768px, 768pxâ€“1024px, and >1024px widths.",
                "expected_outcome": "UI elements adjust responsively. All main components retain mint cream background (#F5FFFA) and teal accents (#008080) regardless of screen size."
            }
        ]
    },
    {
        "requirement_tested": "Support for multiple calculation types beyond basic arithmetic (e.g., scientific, statistical)",
        "user_persona": "A physics student working on lab reports.",
        "user_goal": "To perform trigonometric calculations essential for coursework.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Switching to Scientific Mode",
                "description": "Student selects 'Scientific' from the calculation type dropdown to enable trigonometric functions.",
                "action": "Open dropdown and choose 'Scientific'.",
                "expected_outcome": "'Scientific' is now selected, enabling support for operations like sin(), cos(), log(), etc."
            },
            {
                "step": 2,
                "title": "Performing Trigonometric Operation",
                "description": "Student inputs 'sin(pi/2)' and clicks 'Calculate' expecting a precise numerical answer.",
                "action": "Enter 'sin(pi/2)' and click 'Calculate'.",
                "expected_outcome": "Correctly evaluates to 1 and displays the result promptly."
            }
        ]
    },
    {
        "requirement_tested": "Capability to maintain session state or user context across calculations",
        "user_persona": "A frequent user tracking personal calculation trends.",
        "user_goal": "To continue using the calculator seamlessly without reselecting preferences repeatedly.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Returning After Short Break",
                "description": "User returns to the site after closing the tab earlier and expects previous settings to persist.",
                "action": "Reload the webpage and observe default selections.",
                "expected_outcome": "Previously selected calculation type remains active due to JWT token stored in HTTP-only cookie maintaining session context."
            }
        ]
    },
    {
        "requirement_tested": "Input validation on both frontend and backend for security and correctness",
        "user_persona": "A cybersecurity analyst probing for vulnerabilities.",
        "user_goal": "To test defenses against potentially harmful inputs.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Attempting Malicious Input Injection",
                "description": "Analyst tries injecting JavaScript code disguised as a math expression to test sanitization layers.",
                "action": "Enter '<script>alert(\"XSS\")</script>+2' and click 'Calculate'.",
                "expected_outcome": "Frontend strips non-mathematical characters based on inputSanitizationRules. Backend middleware rejects payload with validation error before reaching core logic."
            }
        ]
    },
    {
        "requirement_tested": "Package.json configured with scripts: 'install:all' for full stack installation and 'dev' for concurrent development startup",
        "user_persona": "A new contributor joining the project team.",
        "user_goal": "To set up the entire development environment efficiently using standard commands.",
        "narrative_steps": [
            {
                "step": 1,
                "title": "Installing Dependencies",
                "description": "Developer clones the repo and runs the agreed-upon script to install dependencies for both frontend and backend.",
                "action": "Run command 'npm run install:all' from root directory.",
                "expected_outcome": "Concurrently executes 'cd frontend && npm install' and 'cd backend && npm install', completing setup for both parts."
            },
            {
                "step": 2,
                "title": "Starting Development Servers",
                "description": "With dependencies installed, the developer launches both frontend and backend servers together.",
                "action": "Run command 'npm run dev'.",
                "expected_outcome": "Simultaneously starts frontend dev server and backend API watcher, allowing integrated debugging and live reloading."
            }
        ]
    }
]